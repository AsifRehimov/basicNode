<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>хейат</title>
</head>
<body>
    <form id="loginForm">
        <input type="number" id="id" name="id" value="<%= user[0].id%>" style="display:none"><br>
        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" value="<%= user[0].name%>" ><br>
        <label for="surname">Surname:</label><br>
        <input type="text" id="surname" name="surname" value="<%= user[0].surname%>"><br><br>
        <input type="submit" value="Submit">
    </form>     

    <script>
        
        $(document).ready(function() {
          // Intercept form submission
          $('#loginForm').submit(function(event) {
            event.preventDefault(); // Prevent default form submission
            // Collect form data
            var formData = {
              id: $('#id').val(),
              name: $('#name').val(),
              surname: $('#surname').val()
            };
            // Send AJAX request
            $.ajax({
              type: 'PUT',
              url: '/update',
              data: formData,
              success: function(response) {
                // Handle successful login response
                console.log(response, "uygyufg"); 
                response.result.affectedRows === 1 ? window.location.replace("/") : ""
              },
              error: function(error) {
                // Handle login error
                console.error(error); // You can customize this based on your requirements
              }
            });
          });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</body>
</html>